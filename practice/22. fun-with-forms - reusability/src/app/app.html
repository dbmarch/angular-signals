@if(submittedSuccessfully()) {
<div class="success-box">Form was submitted successfully!</div>
}
<div class="form">
  <h3>Dinner Review Form</h3>
  <app-field label="Username">
    <input
      type="text"
      [field]="reviewForm.username"
      [class.invalid]="reviewForm.username().invalid() && reviewForm.username().touched()"
    />
  
  </app-field>
  <app-field label="Role">
    <select
      [field]="reviewForm.role"
      [class.invalid]="reviewForm.role().invalid() && reviewForm.role().touched()"
    >
      <option value="user">User</option>
      <option value="author">Author</option>
      <option value="chef">Chef</option>
    </select>
  </app-field>
  <app-field label="Email">
    <input
      type="email"
      [field]="reviewForm.email"
      [class.invalid]="reviewForm.email().invalid() && reviewForm.email().touched()"
    />
  </app-field>
  <app-field label="Description">
    <textarea
      [field]="reviewForm.description"
      [class.invalid]="reviewForm.description().invalid() && reviewForm.description().touched()"
    ></textarea>
  </app-field>

  @for(rev of reviewForm.reviews; track $index) {
  <div class="sub-form">
    <button (click)="removeItem($index)">Remove</button>
    <app-field label="Aspect" >
      <input
        type="text"
        [field]="rev.aspect"
        [class.invalid]="rev.aspect().invalid() && rev.aspect().touched()"
      />
    </app-field>
    <app-field label="Rating">
      <input
        type="number"
        [field]="rev.rating"
        [class.invalid]="rev.rating().invalid() && rev.rating().touched()"
      />
    </app-field>
    <app-field label="Recommendation">
      <select
        [field]="rev.recommendation"
        [class.invalid]="rev.recommendation().invalid() && rev.recommendation().touched()"
      >
        <option value="no-opinion">No Opinion</option>
        <option value="recommend">Would Recommend</option>
        <option value="not-recommend">Would Not Recommend</option>
      </select>
    </app-field>
  </div>

  }

  <button (click)="addReviewItem()">Add Review</button>

  @if(reviewForm().submitting()) {
  <div>Please wait...</div>
  }

  <button (click)="onSubmit()">Submit</button>
</div>

<div class="model">
  <h3>Model Value</h3>
  <pre><code>{{ model() | json }}</code></pre>
</div>
